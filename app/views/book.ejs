<%- include('header') %>
    <%- include('navbar') %>

            <%- include('normalms') %> 
                <div class="card mt-3 shadow ms-3 me-3">
                    <div class="card-body">
                        <div class="card-title fs-3 special-elite-regular text-success">Book</div>
                        <div class="card-title"></div>
                        <form action="/book" method="GET">
                            <div class="input-group mb-3" style="padding-right: 50%;">
                                <input type="number" name="search" class="form-control"
                                    placeholder="Search Book By ISBN...">
                                <button class="btn btn-success" type="submit">Search</button>
                            </div>
                        </form>
                        <div class="mt-3">
                            <a class="btn btn-outline-primary" href="/addBook">
                                +Add
                            </a>
                            <a class="btn btn-outline-success" href="/setAllBookAvailable"
                                onclick="return confirm('Do you want to SET ALL BOOK Available ?')">
                                SET ALL Available
                            </a>
                            <a class="btn btn-outline-danger" href="/deleteAllBook"
                                onclick="return confirm('Are you sure to delete All Book?')">
                                Delete All
                            </a>
                        </div>
                        <div class="table-responsive mt-3">
                            <table class="table table-hover shadow">
                                <thead>
                                    <tr class="text-success">
                                        <th width="170px"></th>
                                        <th width="120px">IMG</th>
                                        <th WIDTH="190px">Book Tag</th>
                                        <th WIDTH="150px">ISBN</th>
                                        <th WIDTH="150px">Author</th>
                                        <th>Book Name</th>
                                        <th WIDTH="450px" >Book Detail</th>
                                        <th>Book Price</th>
                                        <th>Book InStock</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <% books.forEach((book)=> { %>
                                            <td><a class="btn btn-primary" href="/editBook/<%= book.id %>">Edit</a>
                                                <a class="btn btn-danger"
                                                    href="/deleteBook/<%= book.id %>/<%= book.img %>"
                                                    onclick="return confirm('Are you sure to delete ?')">Delete</a>
                                            </td>
                                            <td><img src="../images/books/<%= book.img %>" width="100px" /></td>
                                            <td>
                                                <%= book.group_book_name_tag %>
                                            </td>
                                            <td>
                                                <%= book.isbn %>
                                            </td>
                                            <td>
                                                <%= book.author %>
                                            </td>
                                            <td>
                                                <%= book.book_name %>
                                            </td>
                                            <td>
                                                <%= book.detail %>
                                            </td>
                                            <td>
                                                <%= book.price.toFixed(2) %>
                                            </td>
                                            <td>
                                                <%= book.stock %>
                                            </td>                                    
                                            <td
                                                class="<%= book.status === 'Available' ? 'text-success' : (book.status === 'Reserved' ? 'text-warning' : 'text-danger') %>">
                                                <%= book.status %>
                                            </td>
                                    </tr>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <%- include('footer') %>